## API Report File for "pinot-noir"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts
import type { Sql } from 'sql-template-tag';
import { Dispatcher, Pool } from 'undici';
import PoolStats from 'undici/types/pool-stats';

// @public (undocumented)
export const enum EBrokerErrorCode {
  // (undocumented)
  UNKNOWN = 0,
}

// @public (undocumented)
export const enum EBrokerTransportErrorCode {
  // (undocumented)
  INVALID_RESPONSE = 1,
  // (undocumented)
  UNKNOWN = 0,
}

// @public (undocumented)
export interface IBrokerResponse {
  exceptions?: IPinoException[];
  // (undocumented)
  minConsumingFreshnessTimeMs: number;
  // (undocumented)
  numConsumingSegmentsQueried: number;
  // (undocumented)
  numDocsScanned: number;
  numEntriesScannedPostFilter: number;
  numGroupsLimitReached: boolean;
  // (undocumented)
  numSegmentsMatched: number;
  // (undocumented)
  numSegmentsProcessed: number;
  // (undocumented)
  numSegmentsQueried: number;
  // (undocumented)
  numServersQueries: number;
  // (undocumented)
  numServersResponded: number;
  // (undocumented)
  resultTable: IResultTable;
  // (undocumented)
  timeUsedMs: number;
  // (undocumented)
  totalDocs: number;
  // (undocumented)
  traceInfo: Record<string, string>;
}

// @public (undocumented)
export interface IBrokerTransportConfig {
  // (undocumented)
  bodyTimeout?: number;
  // (undocumented)
  brokerUrl: URL | string;
  connections?: number;
  // (undocumented)
  keepAliveMaxTimeout?: number;
  // (undocumented)
  keepAliveTimeout?: number;
  // (undocumented)
  token: string;
}

// @public (undocumented)
export interface IBrokerTransportRequestOptions
  extends Pick<
    Dispatcher.RequestOptions,
    'method' | 'headers' | 'path' | 'body' | 'query'
  > {}

// @public (undocumented)
export interface IPinoException {
  // (undocumented)
  errorCode: number;
  // (undocumented)
  message: string;
}

// @public (undocumented)
export interface IPinotBrokerTransport {
  // (undocumented)
  close(): Promise<void>;
  // (undocumented)
  request<TResponse = unknown>({
    method,
    headers,
    path,
    body,
    query,
  }: IBrokerTransportRequestOptions): Promise<TResponse>;
  // (undocumented)
  stats: PoolStats;
}

// @public (undocumented)
export interface IPinotClient {
  // (undocumented)
  select<TResult>(query: Sql): Promise<IQueryResult<TResult[]>>;
  // (undocumented)
  transportStats: PoolStats;
}

// @public (undocumented)
export interface IPinotQueryOptions {
  andScanReordering?: boolean;
  enableNullHandling?: boolean;
  explainPlanVerbose?: boolean;
  inPredicateLookupAlgorithm?:
    | 'DIVIDE_BINARY_SEARCH'
    | 'SCAN'
    | 'PLAIN_BINARY_SEARCH';
  inPredicatePreSorted?: boolean;
  maxExecutionThreads?: number;
  maxQueryResponseSizeBytes?: number;
  maxRowsInJoin?: number;
  maxServerResponseSizeBytes?: number;
  minSegmentGroupTrimSize?: number;
  minServerGroupTrimSize?: number;
  numReplicaGroupsToQuery?: number;
  skipIndexes?: string;
  skipUpsert?: boolean;
  timeoutMs?: number;
  useMultistageEngine?: boolean;
  useStarTree?: boolean;
}

// @public (undocumented)
export interface IQueryResult<TRows = unknown> {
  // (undocumented)
  rows: TRows;
  // (undocumented)
  stats: IQueryStats;
}

// @public (undocumented)
export interface IQueryStats {
  // (undocumented)
  docs: {
    scanned: number;
    returned: number;
    total: number;
  };
  // (undocumented)
  minConsumingFreshnessTimeMs: number;
  // (undocumented)
  numConsumingSegmentsQueried: number;
  // (undocumented)
  numEntriesScannedPostFilter: number;
  // (undocumented)
  numGroupsLimitReached: boolean;
  // (undocumented)
  segments: {
    queried: number;
    processed: number;
    matched: number;
  };
  // (undocumented)
  server: {
    queries: number;
    responded: number;
  };
  // (undocumented)
  totalTimeMs: number;
  // (undocumented)
  traceInfo: Record<string, string>;
}

// @public (undocumented)
export interface IResponseSchema {
  // (undocumented)
  columnDataTypes: string[];
  // (undocumented)
  columnNames: string[];
}

// @public (undocumented)
export interface IResultTable {
  // (undocumented)
  dataSchema: IResponseSchema;
  // (undocumented)
  rows: (number | string)[][];
}

// @public (undocumented)
export class PinotBrokerClient implements IPinotClient {
  constructor(deps: { transport: IPinotBrokerTransport });
  // (undocumented)
  protected readonly deps: {
    transport: IPinotBrokerTransport;
  };
  // (undocumented)
  select<TResult>(
    query: Sql,
    options?: IPinotQueryOptions,
    trace?: boolean,
  ): Promise<IQueryResult<TResult[]>>;
  // (undocumented)
  get transportStats(): PoolStats;
}

// @public (undocumented)
export class PinotBrokerJSONTransport implements IPinotBrokerTransport {
  constructor({
    brokerUrl,
    token,
    bodyTimeout,
    connections,
    keepAliveMaxTimeout,
  }: IBrokerTransportConfig);
  // (undocumented)
  close(): Promise<void>;
  // (undocumented)
  protected readonly pool: Pool;
  // (undocumented)
  request<TResponse = unknown>({
    method,
    headers,
    path,
    body,
    query,
  }: IBrokerTransportRequestOptions): Promise<TResponse>;
  // (undocumented)
  get stats(): PoolStats;
  // (undocumented)
  protected readonly token: string;
}

// @public (undocumented)
export class SqlFormat {
  // (undocumented)
  static arrayToList(array: unknown[], timeZone?: string): string;
  // (undocumented)
  static bufferToString(buffer: Buffer): string;
  // (undocumented)
  static dateToString(date: Date, timeZone: string): string;
  // (undocumented)
  static escape(
    val: unknown,
    stringifyObjects?: boolean,
    timeZone?: string,
  ): string;
  // (undocumented)
  static escapeId(val: string | string[], forbidQualified?: boolean): string;
  // (undocumented)
  static format(
    sql: string,
    values: unknown[] | null | undefined,
    stringifyObjects?: boolean,
    timeZone?: string,
  ): string;
  // (undocumented)
  static objectToValues(
    object: {
      [key: string]: unknown;
    },
    timeZone?: string,
  ): string;
  // (undocumented)
  static raw(sql: string): {
    toSqlFormat: () => string;
  };
  // (undocumented)
  static zeroPad(number: number, length: number): string;
}

// @public (undocumented)
export type TPinotDataType =
  | 'INT'
  | 'LONG'
  | 'FLOAT'
  | 'DOUBLE'
  | 'BIG_DECIMAL'
  | 'BOOLEAN'
  | 'TIMESTAMP'
  | 'STRING'
  | 'JSON'
  | 'BYTES';

export * from 'sql-template-tag';

// (No @packageDocumentation comment for this package)
```
