## API Report File for "pinot-noir"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

import { bulk } from '@no-esm/sql-template-tag';
import { Dispatcher } from 'undici';
import { empty } from '@no-esm/sql-template-tag';
import { join } from '@no-esm/sql-template-tag';
import { Pool } from 'undici';
import type PoolStats from 'undici/types/pool-stats';
import { raw } from '@no-esm/sql-template-tag';
import { RawValue } from '@no-esm/sql-template-tag';
import { Sql } from '@no-esm/sql-template-tag';

export { bulk }

// @public
export const enum EBrokerErrorCode {
    UNKNOWN = 0
}

// @public
export const enum EBrokerTransportErrorCode {
    INVALID_RESPONSE = 1,
    UNKNOWN = 0
}

export { empty }

// @public
export enum EPinotErrorType {
    // (undocumented)
    PARSE = 3,
    // (undocumented)
    SQL = 2,
    // (undocumented)
    TRANSPORT = 1,
    // (undocumented)
    UNKNOWN = 0
}

// @public
export enum ERROR_CODES {
    // (undocumented)
    ACCESS_DENIED_ERROR_CODE = 180,
    // (undocumented)
    BROKER_GATHER_ERROR_CODE = 300,
    // (undocumented)
    BROKER_INSTANCE_MISSING_ERROR_CODE = 420,
    // (undocumented)
    BROKER_REQUEST_SEND_ERROR_CODE = 425,
    // (undocumented)
    BROKER_RESOURCE_MISSING_ERROR_CODE = 410,
    // (undocumented)
    BROKER_SEGMENT_UNAVAILABLE_ERROR_CODE = 305,
    // (undocumented)
    BROKER_TIMEOUT_ERROR_CODE = 400,
    // (undocumented)
    COMBINE_GROUP_BY_EXCEPTION_ERROR_CODE = 600,
    // (undocumented)
    COMBINE_SEGMENT_PLAN_TIMEOUT_ERROR_CODE = 170,
    // (undocumented)
    DATA_TABLE_DESERIALIZATION_ERROR_CODE = 310,
    // (undocumented)
    DATA_TABLE_SERIALIZATION_ERROR_CODE = 260,
    // (undocumented)
    EXECUTION_TIMEOUT_ERROR_CODE = 250,
    // (undocumented)
    FEDERATED_BROKER_UNAVAILABLE_ERROR_CODE = 550,
    // (undocumented)
    FUTURE_CALL_ERROR_CODE = 350,
    // (undocumented)
    INTERNAL_ERROR_CODE = 450,
    // (undocumented)
    JSON_COMPILATION_ERROR_CODE = 101,
    // (undocumented)
    JSON_PARSING_ERROR_CODE = 100,
    // (undocumented)
    MERGE_RESPONSE_ERROR_CODE = 500,
    // (undocumented)
    QUERY_CANCELLATION_ERROR_CODE = 205,
    // (undocumented)
    QUERY_EXECUTION_ERROR_CODE = 200,
    // (undocumented)
    QUERY_SCHEDULING_TIMEOUT_ERROR_CODE = 240,
    // (undocumented)
    QUERY_VALIDATION_ERROR_CODE = 700,
    // (undocumented)
    SEGMENT_PLAN_EXECUTION_ERROR_CODE = 160,
    // (undocumented)
    SERVER_NOT_RESPONDING_ERROR_CODE = 427,
    // (undocumented)
    SERVER_OUT_OF_CAPACITY_ERROR_CODE = 211,
    // (undocumented)
    SERVER_SEGMENT_MISSING_ERROR_CODE = 235,
    // (undocumented)
    SERVER_SHUTTING_DOWN_ERROR_CODE = 210,
    // (undocumented)
    SERVER_TABLE_MISSING_ERROR_CODE = 230,
    // (undocumented)
    SQL_PARSING_ERROR_CODE = 150,
    // (undocumented)
    TABLE_DOES_NOT_EXIST_ERROR_CODE = 190,
    // (undocumented)
    TOO_MANY_REQUESTS_ERROR_CODE = 429,
    // (undocumented)
    UNKNOWN_COLUMN_ERROR_CODE = 710,
    // (undocumented)
    UNKNOWN_ERROR_CODE = 1000
}

// @public
export interface IBrokerResponse {
    exceptions?: IPinoException[];
    // (undocumented)
    minConsumingFreshnessTimeMs: number;
    // (undocumented)
    numConsumingSegmentsQueried: number;
    numDocsScanned: number;
    numEntriesScannedPostFilter: number;
    numGroupsLimitReached: boolean;
    numSegmentsMatched: number;
    numSegmentsProcessed: number;
    numSegmentsQueried: number;
    numServersQueries: number;
    numServersResponded: number;
    resultTable: IResultTable;
    timeUsedMs: number;
    totalDocs: number;
    traceInfo: Record<string, string>;
}

// @public
export interface IBrokerTransportConfig {
    bodyTimeout?: number;
    brokerUrl: URL | string;
    connections?: number;
    keepAliveMaxTimeout?: number;
    keepAliveTimeout?: number;
    token: string;
}

// @public
export interface IBrokerTransportRequestOptions extends Pick<Dispatcher.RequestOptions, 'method' | 'headers' | 'path' | 'body' | 'query'> {
}

// @public
export interface IPinoException {
    errorCode: number;
    message: string;
}

// @public
export interface IPinotBrokerTransport {
    close(): Promise<void>;
    request<TResponse = unknown>({ method, headers, path, body, query, }: IBrokerTransportRequestOptions): Promise<TResponse>;
    stats: IPinotPoolStats;
}

// @public
export interface IPinotClient {
    select<TResult>(query: Sql, options?: IPinotQueryOptions, trace?: boolean): Promise<IQueryResult<TResult[]>>;
    transportStats: IPinotPoolStats;
}

// @public (undocumented)
export interface IPinotErrorConstructorArgs<TData = Record<string, unknown>> {
    // (undocumented)
    cause?: Error;
    // (undocumented)
    code?: number;
    // (undocumented)
    data?: TData;
    // (undocumented)
    exceptions?: IPinotSqlException[] | undefined;
    // (undocumented)
    message: string;
    // (undocumented)
    type?: EPinotErrorType;
}

// @public
export interface IPinotPoolStats extends PoolStats {
}

// @public
export interface IPinotQueryOptions {
    andScanReordering?: boolean;
    enableNullHandling?: boolean;
    explainPlanVerbose?: boolean;
    inPredicateLookupAlgorithm?: 'DIVIDE_BINARY_SEARCH' | 'SCAN' | 'PLAIN_BINARY_SEARCH';
    inPredicatePreSorted?: boolean;
    maxExecutionThreads?: number;
    maxQueryResponseSizeBytes?: number;
    maxRowsInJoin?: number;
    maxServerResponseSizeBytes?: number;
    minSegmentGroupTrimSize?: number;
    minServerGroupTrimSize?: number;
    numReplicaGroupsToQuery?: number;
    skipIndexes?: string;
    skipUpsert?: boolean;
    timeoutMs?: number;
    useMultistageEngine?: boolean;
    useStarTree?: boolean;
}

// @public
export interface IPinotSqlException {
    errorCode: number;
    message: string;
}

// @public
export interface IQueryResult<TRows = unknown> {
    queryOptions?: string | undefined;
    rows: TRows;
    sql: string;
    stats: IQueryStats;
}

// @public
export interface IQueryStats {
    docs: {
        scanned: number;
        returned: number;
        total: number;
    };
    // (undocumented)
    minConsumingFreshnessTimeMs: number;
    // (undocumented)
    numConsumingSegmentsQueried: number;
    // (undocumented)
    numEntriesScannedPostFilter: number;
    // (undocumented)
    numGroupsLimitReached: boolean;
    segments: {
        queried: number;
        processed: number;
        matched: number;
    };
    server: {
        queries: number;
        responded: number;
    };
    totalTimeMs: number;
    traceInfo: Record<string, string>;
}

// @public
export interface IResponseSchema {
    columnDataTypes: string[];
    columnNames: string[];
}

// @public
export interface IResultTable {
    dataSchema: IResponseSchema;
    rows: (number | string)[][];
}

export { join }

// @public
export class PinotBrokerClient implements IPinotClient {
    constructor(deps: {
        transport: IPinotBrokerTransport;
    });
    // (undocumented)
    protected readonly deps: {
        transport: IPinotBrokerTransport;
    };
    select<TResult>(query: Sql, options?: IPinotQueryOptions, trace?: boolean): Promise<IQueryResult<TResult[]>>;
    static toQueryOptions(options?: IPinotQueryOptions): string | undefined;
    get transportStats(): IPinotPoolStats;
}

// @public
export class PinotBrokerJSONTransport implements IPinotBrokerTransport {
    constructor({ brokerUrl, token, bodyTimeout, connections, keepAliveMaxTimeout, }: IBrokerTransportConfig);
    close(): Promise<void>;
    // (undocumented)
    protected readonly pool: Pool;
    request<TResponse = unknown>({ method, headers, path, body, query, }: IBrokerTransportRequestOptions): Promise<TResponse>;
    get stats(): IPinotPoolStats;
    // (undocumented)
    protected readonly token: string;
}

// @public (undocumented)
export class PinotError<TData = Record<string, unknown>> extends Error {
    constructor({ message, type, code, cause, exceptions, data, }: IPinotErrorConstructorArgs<TData>);
    // (undocumented)
    readonly code: number;
    // (undocumented)
    readonly data?: TData | undefined;
    // (undocumented)
    readonly exceptions?: IPinotSqlException[] | undefined;
    // (undocumented)
    readonly type: EPinotErrorType;
}

export { raw }

export { RawValue }

export { Sql }

// @public
export const sql: (strings: readonly string[], ...values: readonly RawValue[]) => Sql;

// @public (undocumented)
export class SqlFormat {
    // (undocumented)
    static arrayToList(array: unknown[], timeZone?: string): string;
    // (undocumented)
    static bufferToString(buffer: Buffer): string;
    // (undocumented)
    static dateToString(date: Date, timeZone: string): string;
    // (undocumented)
    static escape(val: unknown, stringifyObjects?: boolean, timeZone?: string): string;
    // (undocumented)
    static escapeId(val: string | string[], forbidQualified?: boolean): string;
    // (undocumented)
    static format(sql: string, values: unknown[] | null | undefined, stringifyObjects?: boolean, timeZone?: string): string;
    // (undocumented)
    static objectToValues(object: Record<string, unknown>, timeZone?: string): string;
    // (undocumented)
    static raw(sql: string): {
        toSqlFormat: () => string;
    };
    // (undocumented)
    static zeroPad(number: number, length: number): string;
}

// @public
export class SqlUtils {
    static formatOptions(options?: IPinotQueryOptions): string;
    static stringifyQuery(query: Sql, options?: IPinotQueryOptions): string;
}

// @public
export type TPinotDataType = 'INT' | 'LONG' | 'FLOAT' | 'DOUBLE' | 'BIG_DECIMAL' | 'BOOLEAN' | 'TIMESTAMP' | 'STRING' | 'JSON' | 'BYTES';

// (No @packageDocumentation comment for this package)

```
